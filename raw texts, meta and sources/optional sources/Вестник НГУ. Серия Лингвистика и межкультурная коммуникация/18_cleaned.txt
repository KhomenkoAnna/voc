а с выренкова и ю смирнов вестник нгу серия лингвистика и межкультурная коммуникация т автоматическое обнаружение и исправление деривационных ошибок в письменной речи на русском как иностранном а с выренкова и ю смирнов национальный исследовательский университет высшая школа экономики москва россия аннотация учебные корпуса представляют собой один из наиболее ценных источников статистических данных об ошиб ках учащихся например информация из корпусов учащихся которые изучают язык как иностранный ис пользуется для исследований в области усвоения второго языка однако достоверность содер жащихся в корпусах данных зависит от качества разметки ошибок которая чаще всего выполняется вручную и таким образом представляет собой трудоемкую и кропотливую процедуру для аннотаторов чтобы облег чить процесс разметки в корпусах используются дополнительные инструменты в частности спеллчекеры в данной статье основное внимание уделяется созданию системы автоматического поиска и исправления сло вообразовательных ошибок этот тип ошибок почти никогда не возникающий у взрослых носителей русского языка но появляющийся у изучающих русский язык как иностранный был вы бран потому что их исправление вызывает большие сложности у существующих спеллчекеров в рамках боты на материале русского учебного корпуса было протестировано два подхода помогающих в решении данной проблемы первый который основывается на принципе конечных автоматов имеет целью обнаружить морфологические наруше ния в текстах изучающих русский как иностранный второй в основе работы которого лежит модель шумного канала обеспечивает исправление выявленных ошибок после тестирования эффек тивности этих двух подходов с учетом результатов их работы была предложена собственная система автокор рекции словообразовательных ошибок в ней используются алгоритм обнаружения морфологических ошибок из подхода и модель которая основывается на теории ди стрибутивной семантики в дополнение к ним вводятся правила исправления для распростра ненных случаев словотворчества а также словарь парадигм для приведения слова к той грамматической фор ме в которой было употреблено исправляемое слово результаты работы авторской системы были апробированы на данных русского учебного корпуса и показали свою валидность ключевые слова словообразовательные ошибки словотворчество машинное обучение автоматическое обнаружение ошибок автоматическое исправление ошибок русский как иностранный учебный корпус разметка благодарности исследование осуществлено в рамках программы фундаментальных исследований ниу для цитирования выренкова а с смирнов и ю автоматическое обнаружение и исправление деривационных ошибок в пись менной речи на русском как иностранном вестник нгу серия лингвистика и межкультурная коммуника ция т с теоретическая и прикладная лингвистика вестник нгу серия лингвистика и межкультурная коммуникация т введение учебные корпуса неродной речи представляют собой систематизированную электронную коллекцию устных и письменных текстов порожденных неносителями языка копотев очевидно что они предназначены для исследователей и преподавателей однако сегодня как отдельное направление развивается проблематика автоматической обработки естественного языка также использующая данные порожденные неносителями в рамках этого направления тесно связанного с моделями машинно го обучения для решения задач определения родного языка автора ав томатической идентификации ошибок в качестве обучающего и тесто вого материала как раз используются данные учебных корпусов созданных на речевом материале изучающих язык в частности русский как иностранный чтобы учебный корпус соответствовал поставленным выше задачам он должен отвечать нескольким требованиям вопервых содержать большой объем аннотированных текстов вовторых гарантировать достоверность разметки предоставляемых корпусом данных ан нотация в нем должна быть корректной и следовать единым правилам соблюсти которые в случае коллективной ручной разметки к тому же крайне трудозатратной очень сложно поэтому в решении вопроса достоверности часто используются системы автокоррекции так выренкова а с смирнов и ю автоматическое обнаружение деривационных ошибок вестник нгу серия лингвистика и межкультурная коммуникация т называемые спеллчекеры которые помогают повысить качество и скорость разметки авто матически исправляя ошибки или же в случае затруднения предлагают выбрать вручную правильный вариант из ограниченного списка возможных решений актуальная проблема состоит в том что спеллчекеры еще не способны исправлять все типы ошибок студентов поскольку их модели работы ориентированы на отклонения ана логичные ошибкам носителей языка в частности значительную сложность представ ляют для них словообразовательные ошибки причина носит прагматический характер и со стоит в том что вопервых носители их почти не допускают и следовательно их нет в обучающих сетах моделей а вовторых сказывается и то что расстояние левенштейна от правильного варианта оказывается в этом случае больше чем при других типах ошибок при ручной разметке деривационные ошибки тоже вызывают трудности так как несмотря на высокую системность словообразовательных моделей она не абсолютна и это вызывает объективные проблемы выражающиеся в смешении ошибок разных типов цель статьи состоит в том чтобы предложить более надежный способ автоматической коррекции отступлений от словообразовательной морфологической нормы для решения указанной проблемы мы сначала протестировали на материале текстов русского учебного корпуса алгоритм по обнаружению морфологических ошибок дополненный системой ав тоисправления эта система основывается на предобученной модели шумного канала она показала лучший результат среди общедоступных спеллчекеров на соревновании по исправ лению ошибок в русскоязычных текстах из социальных интернетмедиа проанализировав результаты работы алгоритма и модели мы предложили собственную систему для выполне ния этой задачи данные русский учебный корпус в качестве данных при разработке программы используются тексты русского учебного корпуса русский учебный корпус представляет собой текстовую коллекцию в кото рую входят примеры устной и письменной речи двух нестандартных категорий носителей русского языка к первой относятся те кто изучает русский как иностранный ко вто рой так называемые эритажные носители то есть естественные билингвы которые со циализировались в языковой среде неродного языка но используют родной язык дома как семейный включает в свой состав учебные тексты например эссе сочинения ответы на во просы которые могли быть написаны в условиях временного ограничения или же без тако вого соответственно теги используемые для разметки ошибок в этом корпусе разделены на пять групп орфографические морфологические лексические синтаксические ошибки в конструкциях ошибки словообразования то есть деривационные ошибки автоматическое распознавание которых является предметом исследования в настоящей работе относятся к категории морфологических в практических целях в настоящей работе мы рассматриваем ошибки формо и словообразования в корневых морфемах префиксах и суффиксах как дери вационные например я познакомаю с новыми друзьями путушествоваю по миру и провожу временю на моем личном исскустве кулинария словообразовательные ошибки все размеченные деривационные ошибки были выгружены из корпуса в формате таблицы где единичным вхождением является случай разметки аннотатора таких случаев оказалось теоретическая и прикладная лингвистика вестник нгу серия лингвистика и межкультурная коммуникация т таблица пример таблицы выгруженной из русского учебного корпуса оригинальный текст слово с ошибкой норма разметка и читая разные статьи о ресторанах в том городе или о жизни экпатов я поняла что по всему миру американцы ишут мексикан скую еду и англичанины ишут индийскую англичанины англичане после осмотрения современного санкт петербурга я предложила бы туристам пой ти именно туда и окунуться в советский ле нинград осмотрения осмотра люди пошли сначала в поликлинику нахо жденная в районе где они жили нахожденная находившуюся валидность разметки выполненной вручную аннотаторами была впоследствии прове рена также вручную в окончательную выборку вошли случаи ошибочного формо или сло вообразования также содержавшие ошибки других типов помимо деривационных см при мер эксперименты эксперимент на основе статьи одна из немногих работ посвященных специализированному подходу к обработке мор фологических ошибок в русском языке была написана маркусом дикинсоном и джошуа херрингом в работе авторы адаптировали уже существующую систему автоматической генерации словообразовательных упражнений для изучаю щих русский язык как иностранный до этого система генерации аналогичных упражнений была уже разработана для немецкого португальского и японского языков русский язык обладая богатой морфологи ей потребовал от разработчиков создания особого модуля способного обнаруживать и авто матически исправлять ошибки которые они отнесли к морфологическим не дифференцируя их в методах исправления в основу работы модуля был положен конечный автомат состоя нием которого являлось наличиеотсутствие ошибки а переходом буквенные комбинации составляющие конкретное слово в общих чертах принцип работы его алгоритма можно опи сать следующим образом сначала слово разделялось на всевозможные комбинации буквенных nграмм после чего проходя по nграммам алгоритм проверял соответствие nграммы морфеме из морфологиче ского словаря в качестве словаря использовалась база данных национального корпуса рус ского языка для словообразовательного поиска если nграмма соответствовала морфеме то анализировалась следующая nграмма а также то что ее комбинация с предыдущей встреча ется в языке выренкова а с смирнов и ю автоматическое обнаружение деривационных ошибок вестник нгу серия лингвистика и межкультурная коммуникация т на первом этапе анализировалась цепочка nграмм либо от начала до конца либо до того момента когда nграмма больше не соответствует ни одной из существующих морфем или не встречается в словаре вместе с соседней морфемой если не удавалось пройти слово по всей его текстовой длине то проходил дополнительный анализ цепочек nграмм в обратную сторону т е от конца к началу слова такая процедура давала возможность локализовать ошибку если следующая после места остановки nграмма есть в морфемном словаре то ошибка считалась морфологической к сожалению без собственного эксперимента оценить качество работы алгоритма описанного в не представляется воз можным так как авторы не предоставили оценки эффективности разработанного ими алго ритма на текстовых данных естественных языков кроме того в статье не была отражена ин формация о формате данных что является серьезным упущением отсутствие представленной оценки результатов и желание узнать насколько успешно система справляется со словообразовательными ошибками побудило нас воссоздать анало гичный алгоритм и провести эксперимент с использованием текстовых данных русского учебного корпуса тестовая выборка состояла из случайно выбранных слов содержащих деривационную ошибку к которым были добавлены правильных слов с тем чтобы выяснить насколько корректно алгоритм различает грамматичные и неграмматичные употребления воссоздан ная нами программа дикинсона и херринга получала информацию о морфологическом со ставе слова из словаря созданного на основе русского национального корпуса следующая таблица показывает в каком виде в словаре представлена морфологическая структура слова таблица морфологическая структура слова улечься в используемом словаре улечься лемма морфема тип позиция в слове алломорфы корня слова часть речи улечься у префикс улечься леч корень лож лег лаг леж леч лог улечься суффикс улечься суффикс в качестве примера работы воссозданной локализованной программы покажем полный процесс обработки текстоформы простее которая представляет собой некорректно образо ванную сравнительную степень прилагательного на первом шаге она формирует список из всех возможных nграмм простее п ростее остее п р о с т е е затем алгоритм проходит по каждой комбинации от начала до конца и так как полностью пройти их как правило не удается то на третьем шаге повторяет эту процедуру для каждого из них но уже в обратном порядке в результате обе итерации сходятся при раз биении слова на две nграммы прост и ее и первая и вторая nграммы присутствуют в словаре морфем что и является свидетельством выявления деривационной ошибки после обработки тестовых данных были получены следующие результаты работы нашего модуля ложноположительных случаев срабатывания алгоритма выявлено не было другими словами программа не нашла ошибки ни в одном из дополнительных тестовых морфоло гически правильных слов в случаях из общего числа то есть в случаев морфологически некорректные слова действительно были идентифицированы как таковые в случаях из слова были пройдены системой поморфемно до конца из этих теоретическая и прикладная лингвистика вестник нгу серия лингвистика и межкультурная коммуникация т в случаях слова были созданы с использованием регулярной модели слово или формо образования старшее свободности работчик лежая и т д и должны были быть выявлены нашей программой но она не справилась с этой задачей по нашему предположе нию причина этого сбоя система не обнаруживает ошибку там где она есть заключается в том что в этой версии программы проверке подвергаются только две соседние морфемы так программа посчитала слово работчик правильным изза того что в словаре встречает слово в котором за корнем работ сразу следует суффикс чик например разработ чик для оставшихся слов восстановить производящую основу не представлялось возможным изза их полной ненормативности к таким словам относятся например чаров конепит таким образом результаты эксперимента показали что локализованный алгоритм дикин сона и херринга можно достаточно успешно использовать для выявления деривационных ошибок в речи однако для создания полноценной системы автокоррекции одного его не достаточно эксперимент с моделью шумного канала приступая к разработке модуля автоматического исправления слов было бы полезно сравнить получаемые результаты с показателями аналогичных систем однако в свободном доступе не оказалось образца спеллчекера созданного специально для текстов написанных изучающими русский как иностранный поэтому в качестве объекта сравнения мы выбрали спеллчекер с моделью от команды в году этот спеллчекер участвовал в соревнованиях по автоматическому исправле нию письменных ошибок для русскоязычных текстов из социальных медиа где показал лучший результат среди общедоступных спеллчекеров со значением кроме того для нас особенно важно что в качестве данных для модели выступают тексты из сети интернет эти тексты часто содержат случаи нестан дартного для русского литературного языка словотворчества которые в определенном смыс ле сравнимы с деривационными ошибками в речи изучающих русский как иностранный см пример взятый из тестового набора соревнования музончик конечно зачетный и почемуто до боли знакомый в основе спеллчекера команды используется довольно распространенный ме тод для исправления ошибок в письменном тексте модель шумного канала разработанная помимо автокоррекции естественного текста модель шумного канала применяется во многих других задачах обработки естественного языка например при создании вопросноответных систем в распознавании речи и в машинном переводе начиная апробацию модели на материале русского учебного корпуса мы ожидали что качество работы модели не будет достаточно удовлетворительным так как во первых модель обучена на текстах носителей русского языка у которых собственно словообразовательные ошибки практически не встречаются даже в текстах сети интернет а вовторых она нацелена на исправление слов которые находятся на небольшом расстоя нии левенштейна символа от правильного слова в то время как некоторые деривацион ошибки могут распространяться на большее количество символов пример тестовая выборка которую мы сформировали на основе русского учебного корпуса включала предложений содержащих те же слова с деривационной ошибкой что были использованы для первого эксперимента описанного выше выборку было решено не рас ширять ввиду необходимости ручной оценки результатов выренкова а с смирнов и ю автоматическое обнаружение деривационных ошибок вестник нгу серия лингвистика и межкультурная коммуникация т в результате модель оставила слова без какихлибо изменений а в случа ях слова с деривационной ошибкой были исправлены на нормативный вариант стоит отметить что во всех этих случаях расстояние левенштейна до правильного слова не превышало слов были исправлены на неправильный вариант как уже говори лось выше мы связываем такое низкое качество работы спеллчекера с лингвис тическими характеристиками материала датасета на котором она обучалась а также с тем что некоторые слова содержащие ошибку очень сильно отличаются от нормативного вари анта но в целом результаты эксперимента позволили получить конкретные значения для оценки качества работы альтернативной системы автоматического исправления словообра зовательных ошибок автоматическое исправление деривационных ошибок при создании собственной системы автоматического исправления словообразовательных ошибок мы решили обратиться к идеям дистрибутивной семантики дистрибутивная семан тика область которая занимается развитием и изучением теории и методов вычисления и категоризации семантической близости лингвистических единиц на основании их распре деления в больших массивах лингвистических данных в ее основе лежит идея о том что если слова употребляются в схожих контекстах они имеют схожую семантику в дистрибутивной семантике слова обычно представляются в виде векторов в многомерном пространстве их контекстов семантическое сходство вычисляется как косинусная близость между векторами двух слов и может принимать значения в промежутке от до на прак тике часто используются только значения выше чем ближе значение косинусного рас стояния к тем чаще слова встречаются в схожем контексте и являются более близкими семантически и наоборот если значение ближе к то у слов практически нет похожих кон текстов поскольку задача состоит в том чтобы уметь предсказывать слово исходя из его окруже ния мы выбрали модель типа кроме того в нашу задачу входит поиск семантически схожих лексем для тех слов которые не встретились в обучающей вы борке модели или встретились там небольшое количество раз поэтому мы сочли необходи мым обратиться к модели строящей векторное представление не слова целиком а всех его nграмм что позволяет получать векторные представления для малочастотных слов опираясь на их части см в силу того что обучение дистри бутивных моделей требует очень большого объема данных и следовательно вычислитель ных мощностей было решено использовать готовую модель в качестве таковой была вы брана модель проекта созданная в году она дает возможность использовать nграммы длиной симво лов кроме того учитывалось что она была обучена на интернеткорпусе тайга причем его размер на момент обучения составлял почти миллиардов слов оригинальная модель получая на вход слово с деривацион ной ошибкой возвращает список из наиболее близких по значению слов никакого до полнительного обучения модели не проводилось таким образом для получения правильного слова в нашу задачу на текущем этапе входит вопервых поиск подходящего словакандидата из полученного списка и вовторых приве дение его к правильной грамматической форме для этого в списке были оставлены только те лексемы которые находятся на расстоянии левенштейна не превышающем половины их длины от корректного варианта затем исходя из некоторых предполагаемых грамматиче ских признаков неправильного слова полученных с помощью морфологического анализато мы провели фильтрацию например для существительного таким признаком стала одушевленность после того как из списка были убраны неподходящие кандидаты вы бирался семантически ближайший и уже на основе полного списка предполагаемых грамма теоретическая и прикладная лингвистика вестник нгу серия лингвистика и межкультурная коммуникация т тических признаков неправильного слова находилась нужная форма в словаре полная пара дигма морфология орфоэпия частотность данный словарь составленный на основе полной акцентуированной парадигмы по за лизняку содержит лемм словоформ и расширен за счет таких словарей как полный орфографический словарь русского языка в в лопатина словарь ино странных слов москва русский язык новый толковословообразовательный сло варь русского языка т ф ефремова толковый словарь под ред и ожегова и н ю шведовой москва азъ и викисловарь после того как подходящая форма слова найдена она выводится системой как результирующая если же на этапе фильтрации результатов не остается ни одного кандидата то алгоритм сообщает что в этом слове при сутствует деривационная ошибка требующая ручного исправления кроме того для иденти фикации некоторых распространенных ошибок которые представляют непреодолимую сложность для модели но при этом являются частотными были написаны особые правила обработки такие правила активируются когда система сталкивается с четко прописанным условием например если система устанавливает что перед ней слово в просторечной форме ихний производная от него форма или очень близкое к этому слово то она исправляет его на соответствующую ему нормативную форму их до пока турист пытается прочитать это письмо група дитей окружает их и крадт ихнену сумку или куртку после пока турист пытается прочитать это письмо група дитей окружает их и крадт их сумку или куртку особые правила введены также для словоформ с частицей не в случаях некорректного образования отрицательных форм приоритет отдается не структурному а семантическому фактору так как вероятность использования автором форманта с негативным значением без намерения выразить отрицание крайне мала по этой причине отсутствуют варианты ис правления в которых семантика отрицания убирается полностью поэтому например вер сия исправления неможно на можно нужно не рассматривается хотя эти варианты чаще всего считаются моделью как самые близкие до вс зависит от людей и в общем неможно установить правила чтобы его объ яснить после вс зависит от людей и в общем нельзя установить правила чтобы его объ яснить таким образом разработанная нами система автоматического исправления ошибок в формо или словообразовании имеет следующую структуру программе на вход поступает слово скрипт реализованный на основе алгоритма дикинсона и херринга определяет при сутствие в слове словообразовательной ошибки при помощи модели составляется список из се мантически близких формкандидатов этот список проходит постобработку для фильтрации словкандидатов по грамматиче ским признакам и частям речи отобранное словокандидат с помощью словаря парадигм приводится к нужной форме если система не смогла предложить никакого нового варианта она выводит сообщение о необходимости ручного исправления некоторые распространенные виды ошибок неразрешимые для модели исправляются с помощью правил см пример выренкова а с смирнов и ю автоматическое обнаружение деривационных ошибок вестник нгу серия лингвистика и межкультурная коммуникация т результаты работы системы автоматического исправления словообразовательных ошибок описанная выше система была протестирована на деривационных ошибках из рус ского учебного корпуса верным мы считали исправление полностью совпадающее с кор ректной формой предложенной разметчиком показатель качества работы системы составил она исправила ошибочных написаний из это примерно в раза лучше чем исправление подобных ошибок специально обученным на интернеттекстах и протестиро ванным нами спеллчекером в основе которого лежит проверенный метод шумного канала все неисправленные случаи были классифицированы наибольшие трудности представляли для системы ошибки в корне слова то есть собст венно словообразовательные случаев в каждом из этих случаев модель не нашла вари антов исправления см примеры ниже и предложила исправить ошибку вручную они искует пассажера для свам машину это очень счастливая вспаминяне иметь бабушка делает мне визу в россию так что думаю и туда паежу на пару недель кроме того система не смогла корректно исправить ошибки в словах образованных тем словосложения объединения корневых элементов двух слов в этих случаях оказалось невозможным исправить ошибку на эквивалент с одним корнем без изменения значения встретилось таких слов самознание народа и истории происходит от самих людей но не может защищать его новонайденное счастье этот факт вместе с тем что население в россии испытывает убыль знамена тельный того что россии понадобудет принять меры чтобы не потерять свой родной язык третью относительно многочисленную группу сложных случаев составили ошибки кото объясняются использованием корня вместе с недопустимой для него словообразователь ной моделью таких случаев было или устраивание какоголибо мироприятия где всем было безумно весело после этого пропадения калитка всегда была заперта проблемы также возникали в случае замены удаления или добавления приставки так как в русском языке они достаточно свободно присоединяются к слову изза этого в случаях были предложены варианты с неподходящей приставкой или совсем без ее исправления до они проездут по лесу после они проездят по лесу до она не хотет вехать на машину но волки ее введут после она не хотет поехать на машину но волки ее введут успешнее всего модель исправляла ошибки в суффиксах если в неправильном слове не было какихлибо других ошибок то оно почти всегда получало нормативную форму до также некоторые из них считаются межфакультетными кафедрами после также некоторые из них считаются межфакультетскими кафедрами до лев гоняет волка долго а волк в мешке упадает и опускается низ скалинки потом лезает на дерево и убегает из дома после лев гоняет волка долго а волк в мешке упадает и опускается низ скалы по том лезает на дерево и убегает из дома теоретическая и прикладная лингвистика вестник нгу серия лингвистика и межкультурная коммуникация т заключение суммируем основное предложена новая система автоматического исправления слово и формообразовательных ошибок в письменной речи на обозначаемых обобщенно как деривационные на первом этапе для обнаружения деривационных ошибок она использует модель на основе конечных автоматов описанную в разделе на втором для их исправления модель дополнен новыми правилами отбора словкандидатов и словарем парадигм для их последующего преобразования в нужную текстоформу новый подход обладает двумя принципиальными преимуществами по сравнению с суще ствующими методами автокоррекции морфологии возможностью исправлять ошибки нахо дящиеся на большем расстоянии левенштейна от правильного варианта и возможностью обучения на текстах носителей языка без значительного ухудшения качества работы эффективность работы модели подтверждена сравнением с автокорректором функцио нирующем на основе модели шумного канала этот последний справляется с задачей исправления деривационных ошибок только в случаев оставляя таким образом большинство ошибок без изменений что говорит о низком уровне его эффективности у раз работанной нами системы эффективность исправления ошибок равна что для такого типа задач является приемлемым результатом сопоставимым с уровнем эффективности дос тигаемым стандартными спеллчекерами на текстах носителей языка